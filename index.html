<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Penilaian Kepuasan Masyarakat</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #0d6efd; --secondary: #6c757d; --success: #198754; --light: #f8f9fa; }
        .hero-section { background: linear-gradient(rgba(13, 110, 253, 0.8), rgba(13, 110, 253, 0.9)), url('https://images.unsplash.com/photo-1516387938699-a93567ec168e?ixlib=rb-4.0.3'); background-size: cover; background-position: center; color: white; padding: 5rem 0; }
        .rating i { color: #ffc107; margin-right: 3px; }
        .service-card { transition: transform 0.3s; border: none; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .service-card:hover { transform: translateY(-5px); }
        .stats-counter { background-color: var(--light); padding: 3rem 0; }
        .stat-number { font-size: 2.5rem; font-weight: bold; color: var(--primary); }
        footer { background-color: #343a40; color: white; padding: 2rem 0; }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-star me-2"></i>Survei Kepuasan</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="#">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link" href="#layanan">Layanan</a></li>
                    <li class="nav-item"><a class="nav-link" href="#statistik">Statistik</a></li>
                    <li class="nav-item"><a class="nav-link" href="#testimoni">Testimoni</a></li>
                    <li class="nav-item"><a class="btn btn-light ms-2" href="#form-survei">Isi Survei</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-center">
        <div class="container">
            <h1 class="display-4 fw-bold mb-4">Penilaian Kepuasan Masyarakat</h1>
            <p class="lead mb-4">Bantu kami meningkatkan kualitas layanan dengan memberikan penilaian dan masukan Anda</p>
            <a href="#form-survei" class="btn btn-light btn-lg">Beri Penilaian <i class="ms-2 fas fa-arrow-right"></i></a>
        </div>
    </section>

    <!-- Layanan Section -->
    <section id="layanan" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Layanan Kami</h2>
                <p class="text-muted">Berikan penilaian untuk layanan yang Anda terima</p>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card service-card h-100">
                        <div class="card-body text-center p-4">
                            <div class="mb-3"><i class="fas fa-file-alt fa-3x text-primary"></i></div>
                            <h4>Layanan Administrasi</h4>
                            <p class="text-muted">Pengurusan dokumen, surat menyurat, dan perizinan</p>
                            <a href="#form-survei" class="btn btn-outline-primary">Beri Nilai</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section id="statistik" class="stats-counter">
        <div class="container">
            <div class="row text-center">
                <div class="col-md-3 col-6"><div class="stat-number" id="total-responses">0</div><p>Total Responden</p></div>
                <div class="col-md-3 col-6"><div class="stat-number" id="average-rating">0</div><p>Rata-rata Kepuasan</p></div>
                <div class="col-md-3 col-6"><div class="stat-number" id="services-rated">0</div><p>Layanan Dinilai</p></div>
                <div class="col-md-3 col-6"><div class="stat-number" id="satisfaction-rate">0%</div><p>Tingkat Kepuasan</p></div>
            </div>
        </div>
    </section>

    <!-- Testimoni Section -->
    <section id="testimoni" class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Testimoni Masyarakat</h2>
                <p class="text-muted">Apa kata mereka tentang layanan kami</p>
            </div>
            <div class="row">
                <div class="col-md-8 mx-auto">
                    <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner" id="testimonial-list"></div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Form Survei Section -->
    <section id="form-survei" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card shadow">
                        <div class="card-header bg-primary text-white text-center py-3">
                            <h3 class="mb-0"><i class="fas fa-clipboard-check me-2"></i>Form Penilaian Kepuasan Layanan</h3>
                        </div>
                        <div class="card-body p-4">
                            <form id="satisfaction-form">
                                <div class="mb-3">
                                    <label for="service" class="form-label">Layanan yang Dinilai</label>
                                    <select class="form-select" id="service" required>
                                        <option value="" selected disabled>Pilih layanan...</option>
                                        <option value="Administrasi">Layanan Administrasi</option>
                                        <option value="Publik">Layanan Publik</option>
                                        <option value="Bantuan">Layanan Bantuan</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Penilaian Kepuasan</label>
                                    <div class="d-flex justify-content-between">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="rating" value="1" required>
                                            <label class="form-check-label">Sangat Buruk</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="rating" value="5">
                                            <label class="form-check-label">Sangat Baik</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3"><label for="comments" class="form-label">Komentar/Saran</label><textarea class="form-control" id="comments" rows="3"></textarea></div>
                                <div class="mb-3"><label for="name" class="form-label">Nama</label><input type="text" id="name" class="form-control"></div>
                                <div class="mb-3"><label for="email" class="form-label">Email</label><input type="email" id="email" class="form-control"></div>
                                <div class="text-center mt-4"><button type="submit" class="btn btn-primary btn-lg"><i class="fas fa-paper-plane me-2"></i>Kirim Penilaian</button></div>
                            </form>
                            <div id="form-alert" class="alert alert-success mt-3 d-none">Terima kasih atas penilaian Anda!</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="text-center">
        <div class="container"><p>&copy; 2023 Sistem Penilaian Kepuasan Masyarakat</p></div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // FORM SUBMIT ke Google Sheets
        document.getElementById('satisfaction-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = {
                service: document.getElementById('service').value,
                rating: document.querySelector('input[name="rating"]:checked').value,
                comments: document.getElementById('comments').value,
                name: document.getElementById('name').value,
                email: document.getElementById('email').value
            };
            fetch("URL_WEB_APP_GOOGLE_SCRIPT", {
                method: "POST",
                body: JSON.stringify(formData),
                headers: {"Content-Type": "application/json"}
            })
            .then(res => res.json())
            .then(res => {
                if (res.result === "success") {
                    document.getElementById('form-alert').classList.remove('d-none');
                    e.target.reset();
                }
            });
        });

        // FETCH Testimoni dari Google Sheets
        fetch("URL_WEB_APP_SPREADSHEET")
          .then(res => res.json())
          .then(data => {
            const container = document.getElementById("testimonial-list");
            container.innerHTML = "";
            data.forEach((item, index) => {
              let stars = "";
              for (let i = 0; i < 5; i++) {
                stars += `<i class=\"fas fa-star${i < item.rating ? '' : '-o'}\"></i>`;
              }
              container.innerHTML += `
                <div class=\"carousel-item ${index === 0 ? 'active' : ''}\">\n                  <div class=\"card testimonial-card\">\n                    <div class=\"card-body text-center p-4\">\n                      <div class=\"rating mb-3\">${stars}</div>\n                      <p class=\"fst-italic mb-4\">\"${item.testimoni}\"</p>\n                      <div class=\"d-flex align-items-center justify-content-center\">\n                        <img src=\"${item.foto}\" class=\"rounded-circle me-3\" width=\"50\">\n                        <div>\n                          <h5 class=\"mb-0\">${item.nama}</h5>\n                          <small class=\"text-muted\">${item.asal}</small>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>`;
            });
          });
    </script>
</body>
</html>
